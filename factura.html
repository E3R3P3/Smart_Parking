<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>factura - SB Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="estiloUnificado.css">
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    
</head>

<body class="s3 sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="./home.html">SP</a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i
                class="fas fa-bars"></i></button>
        <!-- Navbar Search-->
        <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
            <!-- <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div> -->
        </form>
        <!-- Navbar-->
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#!">Settings</a></li>
                    <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                    <li>
                        <hr class="dropdown-divider" />
                    </li>
                    <li><a class="dropdown-item" href="./index.html">Logout</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <a class="nav-link" href="./home.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Inicio
                        </a>
                        <a class="nav-link" href="./reserva.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                            Reservas
                        </a>
                        <a class="nav-link" href="./factura.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Facturas
                        </a>
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <div class="small">Logged in as:</div>
                    Texto de ejemplo
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">

            <div class="container">
                <div class="header">
                    <h1>Historial de Facturas</h1>
                    <p>Todas tus transacciones de reserva de estacionamiento</p>
                </div>
            </div>
            <div class="invoices-container">
                <!-- Las facturas se generarán con JavaScript -->
            </div>

            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid px-4">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; Your Website 2023</div>
                        <div>
                            <a href="#">Privacy Policy</a>
                            &middot;
                            <a href="#">Terms &amp; Conditions</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <script>
            // Datos de ejemplo para facturas
            const invoices = [
                {
                    id: "FAC-2023-001",
                    date: "2023-10-15T14:30:00",
                    mall: "Ágora Mall",
                    level: "Nivel 3",
                    space: "A4",
                    duration: "2 horas",
                    subtotal: 120.00,
                    tax: 18.00,
                    total: 138.00,
                    paymentMethod: "Tarjeta Mastercard **** 1234",
                    status: "paid"
                },
                {
                    id: "FAC-2023-002",
                    date: "2023-10-18T11:15:00",
                    mall: "Sambil Santo Domingo",
                    level: "Nivel 1",
                    space: "B2",
                    duration: "3 horas",
                    subtotal: 180.00,
                    tax: 27.00,
                    total: 207.00,
                    paymentMethod: "PayPal",
                    status: "paid"
                },
                {
                    id: "FAC-2023-003",
                    date: "2023-10-22T16:45:00",
                    mall: "Blue Mall",
                    level: "Sótano 2",
                    space: "C3",
                    duration: "1.5 horas",
                    subtotal: 90.00,
                    tax: 13.50,
                    total: 103.50,
                    paymentMethod: "Tarjeta Visa **** 5678",
                    status: "paid"
                },
                {
                    id: "FAC-2023-004",
                    date: "2023-10-25T19:20:00",
                    mall: "Galería 360",
                    level: "Nivel 4",
                    space: "D1",
                    duration: "4 horas",
                    subtotal: 240.00,
                    tax: 36.00,
                    total: 276.00,
                    paymentMethod: "Efectivo",
                    status: "paid"
                }
            ];

            // Función para formatear fecha
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('es-DO', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            // Función para generar las facturas en la página
            function generateInvoices() {
                const container = document.querySelector('.invoices-container');
                container.innerHTML = '';

                invoices.forEach(invoice => {
                    const invoiceElement = document.createElement('div');
                    invoiceElement.className = 'invoice-card';

                    invoiceElement.innerHTML = `
                    <div class="invoice-header">
                        <div>
                            <div class="invoice-id">${invoice.id}</div>
                            <div class="invoice-date">${formatDate(invoice.date)}</div>
                        </div>
                        <div class="invoice-status status-paid">Pagado</div>
                    </div>
                    
                    <div class="invoice-details">
                        <div class="detail-item">
                            <div class="detail-label">Centro Comercial</div>
                            <div class="detail-value">${invoice.mall}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Nivel</div>
                            <div class="detail-value">${invoice.level}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Espacio</div>
                            <div class="detail-value">${invoice.space}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Duración</div>
                            <div class="detail-value">${invoice.duration}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Método de Pago</div>
                            <div class="detail-value">${invoice.paymentMethod}</div>
                        </div>
                    </div>
                    
                    <div class="invoice-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span>RD$ ${invoice.subtotal.toFixed(2)}</span>
                        </div>
                        <div class="summary-row">
                            <span>ITBIS (15%):</span>
                            <span>RD$ ${invoice.tax.toFixed(2)}</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total:</span>
                            <span>RD$ ${invoice.total.toFixed(2)}</span>
                        </div>
                    </div>
                    
                    <div class="invoice-actions">
                        <button class="print-btn" onclick="printInvoice('${invoice.id}')">
                            <i class="fas fa-print"></i> Imprimir Factura
                        </button>
                    </div>
                `;

                    container.appendChild(invoiceElement);
                });
            }

            // Función para imprimir una factura específica
            function printInvoice(invoiceId) {
                const invoice = invoices.find(inv => inv.id === invoiceId);

                if (!invoice) return;

                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                <!DOCTYPE html>
                <html lang="es">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Factura ${invoice.id}</title>
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        }
                        
                        body {
                            background: white;
                            color: #333;
                            padding: 20px;
                        }
                        
                        .print-section {
                            max-width: 800px;
                            margin: 0 auto;
                            border: 1px solid #ddd;
                            padding: 30px;
                            position: relative;
                        }
                        
                        .print-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 30px;
                            padding-bottom: 20px;
                            border-bottom: 2px solid #3498db;
                        }
                        
                        .company-info h1 {
                            color: #2c3e50;
                            font-size: 1.8rem;
                            margin-bottom: 5px;
                        }
                        
                        .company-info p {
                            color: #7f8c8d;
                            font-size: 0.9rem;
                        }
                        
                        .invoice-info {
                            text-align: right;
                        }
                        
                        .invoice-id {
                            font-size: 1.4rem;
                            font-weight: bold;
                            color: #2c3e50;
                            margin-bottom: 5px;
                        }
                        
                        .invoice-date {
                            color: #7f8c8d;
                            font-size: 1rem;
                        }
                        
                        .client-info {
                            margin-bottom: 30px;
                            padding: 15px;
                            background: #f8f9fa;
                            border-radius: 8px;
                        }
                        
                        .section-title {
                            color: #3498db;
                            margin-bottom: 15px;
                            padding-bottom: 5px;
                            border-bottom: 1px solid #eee;
                        }
                        
                        .invoice-details {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 15px;
                            margin-bottom: 30px;
                        }
                        
                        .detail-item {
                            margin-bottom: 10px;
                        }
                        
                        .detail-label {
                            font-weight: 600;
                            color: #7f8c8d;
                            font-size: 0.9rem;
                            margin-bottom: 3px;
                        }
                        
                        .detail-value {
                            font-size: 1.1rem;
                            color: #2c3e50;
                        }
                        
                        .invoice-summary {
                            margin-top: 30px;
                            padding: 20px;
                            background: #f8f9fa;
                            border-radius: 8px;
                        }
                        
                        .summary-row {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 10px;
                        }
                        
                        .summary-total {
                            font-weight: bold;
                            font-size: 1.2rem;
                            padding-top: 10px;
                            margin-top: 10px;
                            border-top: 1px solid #ddd;
                        }
                        
                        .footer {
                            margin-top: 40px;
                            padding-top: 20px;
                            border-top: 1px solid #eee;
                            text-align: center;
                            color: #7f8c8d;
                            font-size: 0.9rem;
                        }
                        
                        .status-badge {
                            padding: 5px 15px;
                            background: #e8f5e9;
                            color: #2e7d32;
                            border-radius: 20px;
                            font-weight: 600;
                            display: inline-block;
                            margin-top: 10px;
                        }
                        
                        @media print {
                            body {
                                padding: 0;
                            margin: 0;
                            font-size: 12pt;
                            color: #000;
                            background: #fff;
                            -webkit-print-color-adjust: exact;
                            print-color-adjust: exact;
                            width: 100%;
                            height: 100%;
                            box-sizing: border-box;
                            position: relative;
                            top: 0;
                            left: 0;
                            margin: 0;
                            padding: 15mm;
                            transform: none;
                            overflow: visible;
                            display: block;
                            page-break-after: avoid;
                            page-break-inside: avoid;
                            break-inside: avoid;
                            break-after: avoid;
                            max-width: 100%;
                        }
                            
                            .print-section {
                                max-width: 100%;
                                margin: 0;
                                padding: 0;
                                border: none;
                            }
                            
                            .print-header {
                                margin-bottom: 20px;
                            }
                            
                            .no-print {
                                display: none !important;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="print-section">
                        <div class="print-header">
                            <div class="company-info">
                                <h1>Sistema Inteligente de Gestión de Parqueos</h1>
                                <p>Av. Winston Churchill, Santo Domingo, RD</p>
                                <p>Tel: (809) 555-1234 | Email: info@sigp.com</p>
                            </div>
                            <div class="invoice-info">
                                <div class="invoice-id">${invoice.id}</div>
                                <div class="invoice-date">${formatDate(invoice.date)}</div>
                                <div class="status-badge">Pagado</div>
                            </div>
                        </div>
                        
                        <div class="client-info">
                            <div class="section-title">Cliente</div>
                            <div class="detail-item">
                                <div class="detail-label">Nombre</div>
                                <div class="detail-value">Oliver Reyes</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Tipo de cliente</div>
                                <div class="detail-value">Premium</div>
                            </div>
                        </div>
                        
                        <div class="section-title">Detalles de la Reserva</div>
                        <div class="invoice-details">
                            <div class="detail-item">
                                <div class="detail-label">Centro Comercial</div>
                                <div class="detail-value">${invoice.mall}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Nivel</div>
                                <div class="detail-value">${invoice.level}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Espacio</div>
                                <div class="detail-value">${invoice.space}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Duración</div>
                                <div class="detail-value">${invoice.duration}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Método de Pago</div>
                                <div class="detail-value">${invoice.paymentMethod}</div>
                            </div>
                        </div>
                        
                        <div class="invoice-summary">
                            <div class="section-title">Resumen de Pago</div>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span>RD$ ${invoice.subtotal.toFixed(2)}</span>
                            </div>
                            <div class="summary-row">
                                <span>ITBIS (15%):</span>
                                <span>RD$ ${invoice.tax.toFixed(2)}</span>
                            </div>
                            <div class="summary-row summary-total">
                                <span>Total:</span>
                                <span>RD$ ${invoice.total.toFixed(2)}</span>
                            </div>
                        </div>
                        
                        <div class="footer">
                            <p>¡Gracias por utilizar nuestro servicio de reservas!</p>
                            <p>Este documento es válido como factura fiscal</p>
                            <p>Para consultas: soporte@sigp.com | Tel: (809) 555-1234</p>
                            <p>Fecha de impresión: ${new Date().toLocaleDateString('es-DO')}</p>
                        </div>
                    </div>
                    <script>
                        // Imprimir automáticamente al cargar
                        window.onload = function() {
                            window.print();
                        };
                    <\/script>
                </body>
                </html>
            `);

                printWindow.document.close();
            }

            // Generar facturas al cargar la página
            window.onload = generateInvoices;
        </script>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <!-- <script src="./scripts.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"
        crossorigin="anonymous"></script>
    <!-- <script src="src/datatables-simple-demo.js"></script> -->
</body>

</html>